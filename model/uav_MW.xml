<mujoco model="f450rope_combined">
    <option timestep="0.001" integrator="RK4" density="1.225" viscosity="1.8e-5"/>
    
     <compiler meshdir="meshes/" />
	
	<visual>
        <!-- <rgba haze="0.15 0.25 0.35 1"/> -->
		<rgba haze="0.2 0.3 0.4 1"/>  <!-- 天空颜色与地面rgb1一致 -->
        <global azimuth="-20" elevation="-20" ellipsoidinertia="true"/>
    </visual>




<default>
    <default class="d435i">
      <material specular="0" shininess="0.25"/>
      <default class="visual">
        <geom group="2" type="mesh" contype="0" conaffinity="0" mass="0"/>
      </default>
      <default class="collision">
        <geom group="3" type="mesh" mass="0"/>
      </default>
    </default>
  </default>





    <asset>
        <texture name="groundplane_tex" type="2d" builtin="checker" rgb1="0.2 0.3 0.4" rgb2="0.1 0.2 0.3"
                 mark="edge" markrgb="0.8 0.8 0.8" width="300" height="300"/>
				 
        <material name="groundplane_mat" texture="groundplane_tex" texuniform="true" texrepeat="5 5" reflectance="0.2"/>
        
		<!-- <texture name="groundplane_tex" type="2d" builtin="checker"	rgb1="0.60 0.62 0.64"  -->
		<!-- rgb2="0.85 0.87 0.89" mark="edge" markrgb="0.85 0.85 0.85" width="300" height="300"/> -->

		<!-- <material name="groundplane_mat" texture="groundplane_tex" texuniform="true" texrepeat="5 5" reflectance="0.22"/> -->
		
        <mesh name="base_link" file="base_link.STL"/>
        <mesh name="p1" file="p1.STL"/>
        <mesh name="p2" file="p2.STL"/>
        <mesh name="p3" file="p3.STL"/>
        <mesh name="p4" file="p4.STL"/>
        <mesh name="armz" file="armz.STL"/>
        <mesh name="army" file="army.STL"/>
        <mesh name="winch" file="winch.STL"/>
		
		 <!-- 添加天空盒纹理：设置为你需要的颜色（例如天蓝色渐变） -->
			<texture type="skybox" builtin="gradient" 
           rgb1="0.5 0.7 0.9"  
           rgb2="0.3 0.5 0.7"  
           width="512" height="512"/>

		
		
		
		
		
		<!-- 相机相关建模 -->
    <material class="d435i" name="Black_Acrylic" rgba="0.070360 0.070360 0.070360 1"/>
    <material class="d435i" name="Cameras_Gray" rgba="0.296138 0.296138 0.296138 1"/>
    <material class="d435i" name="IR_Emitter_Lens" rgba="0.287440 0.665387 0.327778 1"/>
    <material class="d435i" name="IR_Lens" rgba="0.035601 0.035601 0.035601 1"/>
    <material class="d435i" name="IR_Rim" rgba="0.799102 0.806952 0.799103 1"/>
    <material class="d435i" name="Metal_Casing" rgba="1 1 1 1"/>
    <material class="d435i" name="RGB_Pupil" rgba="0.087140 0.002866 0.009346 1"/>

    <mesh file="d435i_0.obj"/>
    <mesh file="d435i_1.obj"/>
    <mesh file="d435i_2.obj"/>
    <mesh file="d435i_3.obj"/>
    <mesh file="d435i_4.obj"/>
    <mesh file="d435i_5.obj"/>
    <mesh file="d435i_6.obj"/>
    <mesh file="d435i_7.obj"/>
    <mesh file="d435i_8.obj"/>
		
		
		
    </asset>

    <worldbody>
	
	


	
	
	
	
	
	
        <!-- 地面 -->
        <geom name="floor" type="plane" pos="0 0 0" size="0 0 0.05" material="groundplane_mat" friction="1.4 0.5 0.8"/>
        
        <!-- 光照 -->
        <light directional="true" pos="0 0 1.5" dir="0 0 -1" diffuse="0.6 0.6 0.6" ambient="0.3 0.3 0.3"/>
        
        <!-- 场景相机 -->
        <!-- <camera name="world_camera" mode="trackcom" pos="0 -1.2 0.8" xyaxes="1 0 0 0 1 0" fovy="70"/> -->
		<!-- 修改后的场景相机 -->
		<camera name="world_camera" mode="trackcom" pos="0 -1.8 1.2" xyaxes="1 0 0 0 0.9 0.1" fovy="75"/>
		
		
		<!-- 世界坐标系FLU三轴小棍, 长0.2m, 半径0.005m -->
		<body name="world_axis" pos="0 0 0">
			<!-- X轴: 红色，正方向 -->
			<geom name="axis_x" type="cylinder" fromto="0 0 0  0.2 0 0" size="0.005" rgba="1 0 0 1"/>
			<!-- Y轴: 绿色，正方向 -->
			<geom name="axis_y" type="cylinder" fromto="0 0 0  0 0.2 0" size="0.005" rgba="0 1 0 1"/>
			<!-- Z轴: 蓝色，正方向 -->
			<geom name="axis_z" type="cylinder" fromto="0 0 0  0 0 0.2" size="0.005" rgba="0 0 1 1"/>
		</body>


		钻框结构：平面垂直于x轴（与yz平面共面），内宽0.8m、内高0.8m
		<!-- <body name="drill_frame" pos="1.55 0.49 2.75"> -->
			左竖杆：位于 y = -0.40，细长方向沿 z
			<!-- <geom name="frame_left" type="box" -->
				  <!-- pos="-0.015 -0.40 0" -->
				  <!-- size="0.015 0.015 0.40" -->
				  <!-- rgba="0.9 0.3 0.1 1" -->
				  <!-- mass="1.0"/> -->
			右竖杆：位于 y = +0.40
			<!-- <geom name="frame_right" type="box" -->
				  <!-- pos="-0.015 0.40 0" -->
				  <!-- size="0.015 0.015 0.40" -->
				  <!-- rgba="0.9 0.3 0.1 1" -->
				  <!-- mass="1.0"/> -->
			上横杆：位于 z = +0.40，细长方向沿 y
			<!-- <geom name="frame_top" type="box" -->
				  <!-- pos="-0.015 0 0.40" -->
				  <!-- size="0.015 0.40 0.015" -->
				  <!-- rgba="0.9 0.3 0.1 1" -->
				  <!-- mass="0.8"/> -->
			下横杆：位于 z = -0.40
			<!-- <geom name="frame_bottom" type="box" -->
				  <!-- pos="-0.015 0 -0.40" -->
				  <!-- size="0.015 0.40 0.015" -->
				  <!-- rgba="0.9 0.3 0.1 1" -->
				  <!-- mass="0.8"/> -->
		<!-- </body> -->





				<!-- 实验3-减速过框：  钻框结构：平面垂直于x轴（与yz平面共面），内宽0.8m、内高1m -->
		<!-- <body name="drill_frame" pos="2.0 0.49 2.35"> -->
			左竖杆：位于 y = -0.30，细长方向沿 z
			<!-- <geom name="frame_left" type="box" -->
				  <!-- pos="-0.015 -0.40 0" -->
				  <!-- size="0.015 0.015 0.50" -->
				  <!-- rgba="0.9 0.3 0.1 1" -->
				  <!-- mass="1.0"/> -->
			右竖杆：位于 y = +0.30
			<!-- <geom name="frame_right" type="box" -->
				  <!-- pos="-0.015 0.40 0" -->
				  <!-- size="0.015 0.015 0.50" -->
				  <!-- rgba="0.9 0.3 0.1 1" -->
				  <!-- mass="1.0"/> -->
			上横杆：位于 z = +0.40，细长方向沿 y
			<!-- <geom name="frame_top" type="box" -->
				  <!-- pos="-0.015 0 0.50" -->
				  <!-- size="0.015 0.40 0.015" -->
				  <!-- rgba="0.9 0.3 0.1 1" -->
				  <!-- mass="0.8"/> -->
			下横杆：位于 z = -0.40
			<!-- <geom name="frame_bottom" type="box" -->
				  <!-- pos="-0.015 0 -0.50" -->
				  <!-- size="0.015 0.40 0.015" -->
				  <!-- rgba="0.9 0.3 0.1 1" -->
				  <!-- mass="0.8"/> -->
		<!-- </body> -->






        <!-- 无人机1主体 -->
        <body name="base_link" pos="0 0.5 0.98"  euler="0 0 0">
            <freejoint/>
            <geom type="mesh" mesh="base_link" mass="1.3" rgba="0.2  0.2  0.2 1"/>
            
			
			
			<site name="imu" />
            <site name="actuation"/>
            
			<!-- D435i 相机安装在 base_link 下方 -->
			<!-- <body name="d435i" childclass="d435i" pos="0.075 0  -0.025" euler="180 0 90"> -->
				  <!-- <geom mesh="d435i_0" material="IR_Lens" class="visual"/> -->
				  <!-- <geom mesh="d435i_1" material="IR_Emitter_Lens" class="visual"/> -->
				  <!-- <geom mesh="d435i_2" material="IR_Rim" class="visual"/> -->
				  <!-- <geom mesh="d435i_3" material="IR_Lens" class="visual"/> -->
				  <!-- <geom mesh="d435i_4" material="Cameras_Gray" class="visual"/> -->
				  <!-- <geom mesh="d435i_5" material="Black_Acrylic" class="visual"/> -->
				  <!-- <geom mesh="d435i_6" material="Black_Acrylic" class="visual"/> -->
				  <!-- <geom mesh="d435i_7" material="RGB_Pupil" class="visual"/> -->
				  <!-- <geom mesh="d435i_8" mass="0.072" material="Metal_Casing" class="visual"/> -->
				  <!-- <geom class="collision" type="capsule" mesh="d435i_8"/> -->

				<!-- 可选：用于检测或传感 site -->
				<!-- <site name="camera_optical_frame" pos="0 0 0" size="0.005" rgba="0 1 0 1"/> -->
				<!-- <camera name="camera" mode="fixed" pos="0 0 0" euler="0 180 0"/> -->
			<!-- </body> -->
			
			
            <!-- 支架 -->
			<body name="leg1" pos="0.12 0.12 -0.1">
               	<geom type="cylinder" size="0.005 0.15" mass="0.02" rgba="0.3 0.3 0.3 1"/>
            </body>
            <body name="leg2" pos="0.12 -0.12 -0.1">
                <geom type="cylinder" size="0.005 0.15" mass="0.02" rgba="0.3 0.3 0.3 1"/>
            </body>
            <body name="leg3" pos="-0.12 0.12 -0.1">
                <geom type="cylinder" size="0.005 0.15" mass="0.02" rgba="0.3 0.3 0.3 1"/>
            </body>
            <body name="leg4" pos="-0.12 -0.12 -0.1">
                <geom type="cylinder" size="0.005 0.15" mass="0.02" rgba="0.3 0.3 0.3 1"/>
            </body>
			
	
			
			<!-- 桨叶 -->
			<!-- p1 -->
			<body name="p1" pos="0.1591 0.1591 0.03775">
				<geom type="mesh" mesh="p1" mass="0.014" rgba="1 0 0 1"/>
				<joint name="pz1" type="hinge" axis="0 0 1" pos="0 0 0" damping="0.01"/>
				<site name="motor1_site" />
			</body>
			
			<!-- p2 -->
			<body name="p2" pos="0.1591 -0.1591 0.03775">
				<!-- <geom type="mesh" mesh="p2" mass="0.014" rgba="1 0.5 0 1"/> -->
				<geom type="mesh" mesh="p2" mass="0.014" rgba="1 0 0 1"/>
				<joint name="pz2" type="hinge" axis="0 0 1" pos="0 0 0" damping="0.01"/>
				<site name="motor2_site" />
			</body>

			<!-- p3 -->
			<body name="p3" pos="-0.1591 -0.1591 0.03775">
				<geom type="mesh" mesh="p3" mass="0.014" rgba="0.2  0.2  0.2 1"/>
				<joint name="pz3" type="hinge" axis="0 0 1" pos="0 0 0" damping="0.01"/>
				<site name="motor3_site" />
			</body>

			<!-- p4 -->
			<body name="p4" pos="-0.1591 0.1591 0.03775">
				<geom type="mesh" mesh="p4" mass="0.014" rgba="0.2  0.2  0.2 1"/>
				<joint name="pz4" type="hinge" axis="0 0 1" pos="0 0 0" damping="0.01"/>
				<site name="motor4_site"/>
			</body>
			
			
            
					<!-- 机械臂 -->
					<body name="armz" pos="0 0 0">
					<site name="s1_site"/>
						
						<geom type="mesh" mesh="armz" mass="0.118" rgba="0.2  0.2  0.2 1"/>
						<joint name="armzz" type="hinge" axis="0 0 1" pos="0 0 0" damping="0.01"/>
						<site name="armz_force_site" pos="0 0 0" size="0.005" rgba="1 0 0 1"/>
						

						<body name="army" pos="0 0 -0.05475" euler="0 0 0">
							
							<site name="s2_site"/>
							
							<geom type="mesh" mesh="army" mass="0.161" rgba="0.2  0.2  0.2 1"/>
							<joint name="armyy" type="hinge" axis="0 1 0" pos="0 0 0" damping="0.01"/>

							<body name="winch" pos="0 0 -0.05889" euler="0 0 0">
								<site name="s3_site"/>
								<geom type="mesh" mesh="winch" mass="0.0642" rgba="0.79 0.82 0.93 1"/>
								<!-- <joint name="winchx" type="hinge" axis="0 -1 0" pos="0 0 0" damping="0"/> -->
								<site name="hook" pos="0 0 0" size="0.008" rgba="0 0 1 1"/>
							</body>
						</body>
					</body>
        </body>

 
		
        <!-- 负载 -->
        <body name="weight" pos="0 .5 0.13">
			<freejoint/>
			<geom type="box" size=".03 .03 .03" mass="0.24" rgba=".2 .2 .7 1"/>			
			<site name="pulley" pos="0 0 0.03" size="0.008" type="sphere" rgba="0.8 0.2 0.1 1"/>
		</body>
		
		
		
	
		
		
		
		
		
		
		
		
		
		
		
    </worldbody>


<!-- 50-10000，越小绳弹性越大 -->
    <tendon>
        <spatial springlength="0 1.15" stiffness="500">
            <site site="pulley"/>
            <site site="hook"/>
        </spatial>
    </tendon>


	

	<compiler meshdir="meshes/" discardvisual="false" autolimits="true"/>
    



<actuator>
		<!-- 无人机各桨输入 -->
		<motor ctrlrange="0 1" gear="0 0 8.25 0 0 0.1452" site="motor1_site" name="motor1"/>
		<motor ctrlrange="0 1" gear="0 0 8.25 0 0  -0.1452" site="motor2_site" name="motor2"/>
		<motor ctrlrange="0 1" gear="0 0 8.25 0 0 0.1452" site="motor3_site" name="motor3"/>
		<motor ctrlrange="0 1" gear="0 0 8.25 0 0  -0.1452" site="motor4_site" name="motor4"/>
		
		 <!-- 新增的机械臂关节执行器 -->
		<motor name="armz_motor" joint="armzz" ctrlrange="-1 1" gear="0.2"/>
		<motor name="army_motor" joint="armyy" ctrlrange="-1 1" gear="0.2"/>
	
</actuator>

    <sensor>
        <!-- UAV传感器  -->
		<!-- 机体角速度(ωx,ωy,ωz) - 对应论文中ω⁰ -->
		<gyro name="body_gyro" site="imu"/>
		<!-- 机体位置(x,y,z) - 对应论文中p⁰ -->
		<framepos name="imu_pos" objtype="site" objname="imu"/>
		 <!-- 机体线速度(vx,vy,vz) - 对应论文中ṗ⁰ -->
		<!-- <velocimeter name="body_vel" site="imu" />  -->
		<!-- 世界坐标系下的线速度 -->
		<framelinvel name="world_vel" objtype="site" objname="imu"/>
		<!-- 机体线加速度(ax,ay,az) -->
		<accelerometer name="body_linacc" site="imu"/>
		<!-- 机体在世界坐标系下的加速度 -->
		<framelinacc name="fram_linacc" objtype="site" objname="imu" />
		<!-- 机体四元数姿态 - 对应论文中R⁰ -->
		<framequat name="body_quat" objtype="site" objname="imu"/>

	
		<!-- ========== 机械臂关节传感器 ========== -->
		<!-- 用于机械臂控制，对应论文中的α₁, α₂ -->
		
		<!-- 第一关节角度α₁(绕z轴旋转) -->
		<jointpos name="armz_pos" joint="armzz"/>               
		<!-- 第二关节角度α₂(绕y轴旋转) -->
		<jointpos name="army_pos" joint="armyy"/>               
		<!-- 第一关节角速度α̇₁ -->
		<jointvel name="armz_vel" joint="armzz"/>               
		<!-- 第二关节角速度α̇₂ -->
		<jointvel name="army_vel" joint="armyy"/>               



		<!-- ========== 绳索几何传感器 ========== -->
		<!-- 用于计算摆角θₓ,θᵧ，对应论文中的绳索方向向量qc -->
		<!-- 绳索上端点位置(机械臂末端) -->
		<framepos name="hook_pos" objtype="site" objname="hook"/>
		<!-- 绳索下端点位置(重物连接点) -->
		<framepos name="pulley_pos" objtype="site" objname="pulley"/>

		
		<!-- 新增：hook 和 pulley 的绝对速度传感器 -->
        <framelinvel name="hook_vel" objtype="site" objname="hook"/>
        <framelinvel name="pulley_vel" objtype="site" objname="pulley"/>
		
		
		

		

		
		<!-- 悬挂重力传感器  远古后续版本启用-->
		<!-- <force name="armz_force" site="armz_force_site"/> -->
		<!-- <torque name="armz_torque" site="armz_force_site"/> -->
    </sensor>
	
	
	
	<contact>
        <!-- 禁掉整棵 bodyA 与 bodyB 的所有碰撞 -->
        <exclude body1="armz" body2="base_link"/>
		<exclude body1="armz" body2="army"/>
        <!-- 或者只禁掉两个具体 geom -->
        <!-- <exclude geom1="gA"  geom2="gB"/> -->
    </contact>
	

	

</mujoco>